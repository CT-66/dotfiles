#!/bin/bash

default_wm="/usr/bin/i3"

# $1:name, $2:path
function start() {
    echo "Starting $1"
    exec startx /usr/bin/"$2" 2>/dev/null
}

function main() {
    wm="$(echo 'i3
Bspwm
Qtile
Xmonad
AwesomeWM
Dwm
Spectrwm
Openbox
KDE Plasma' | fzf --reverse | tr '[:upper:]' '[:lower:]')"

if [ "$wm" = "" ]; then
    echo "Starting $default_wm"
    exec startx "$default_wm"
else
    case $wm in
        "bspwm")
            start "Bspwm" "bspwm"
            ;;
        "qtile")
            start "Qtile" "qtile start"
            ;;
        "xmonad")
            start "Xmonad" "xmonad"
            ;;
        "awesomewm")
            start "AwesomeWM" "awesome"
            ;;
        "dwm")
            echo "Starting Dwm"
            exec startx /usr/local/bin/dwm 2>/dev/null
            ;;
        "spectrwm")
            start "Spectrwm" "spectrwm"
            ;;
        "openbox")
            start "Openbox" "openbox-session"
            ;;
        "kde plasma")
            export DESKTOP_SESSION=plasma
            start "KDE Plasma" "startplasma-x11"
            ;;
        *)
            echo "Invalid input"
            exit 1
    esac

fi

}

main
